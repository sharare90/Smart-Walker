#:kivy 1.8.0


<StandardPressureSensorWidget@PressureSensorWidget>
    Label:
        canvas:
            Color:
                rgba: root.dr_circle_color
            Ellipse:
                pos: root.center_x - root.dr_radius, root.center_y - root.dr_radius
                size: 2 * root.dr_radius, 2 * root.dr_radius

    Label:
        canvas:
            Color:
                rgba: root.patient_circle_color
            Line:
                width: 5
                ellipse:
                    (
                    root.center_x - root.patient_radius,
                    root.center_y - root.patient_radius,
                    2 * root.patient_radius,
                    2 * root.patient_radius,
                    0,
                    360,
                    20
                    )

<SmartWalker>
    fl: fl
    fr: fr
    rl: rl
    rr: rr
    proximity: proximity
    gyro: gyro

    canvas.before:
        Color:
            rgba: 0.282, 0.239, 0.545, 1
        Rectangle:
            pos: self.pos
            size: self.size

    Label:
        id:time
        text: root.time
        bold: True
        font_size: 30
        pos:root.width / 2 - 50, root.height * 4 / 5
        color: 1, 0.647, 0, 1

    Label:
        id: top_line
        canvas:
            Color:
                rgba: 1,1,1,1
            Rectangle:
                id:top
                pos:root.x, root.top * 4 / 5
                size:root.width, 10

    #Label:
    #    id: normal_unsafe
    #    text: "Normal" if root.safe else "Unsafe"
    #    pos: root.width / 2 - self.width / 2, root.height / 2
    #    canvas:
    #        Color:
    #            rgba: 1,1,1,1


    StandardPressureSensorWidget:
        id: fl
        pos: root.width / 4, root.top * 8 / 15

    StandardPressureSensorWidget:
        id: fr
        pos: root.width * 3 / 4 - fr.width, root.top * 8 / 15

    StandardPressureSensorWidget:
        id: rl
        pos: root.width / 4, root.top * 1 / 5

    StandardPressureSensorWidget:
        id: rr
        pos: root.width * 3 / 4 - rr.width, root.top * 1 / 5

    ProximityWidget:
        id: proximity
        pos: 20, root.center_y / 3
        size: 40, 300

        canvas.before:
            Color:
                rgba: 0, 0, 0, 1
            Rectangle:
                pos: proximity.center_x - proximity.width / 2, proximity.center_y - proximity.height / 2,
                size: proximity.width, proximity.height

    GyroWidget:
        id: gyro
        size: 10 ,10
        pos: root.width / 2 - 5, root.top * 1 / 8 - 5

        canvas.before:
            Color:
                rgba: 1, 0, 0, 1
            Ellipse:
                pos: root.width / 2 - 5 + gyro.new_pitch_value, root.top * 1 / 8 - 5 + gyro.new_roll_value
                size: gyro.width, gyro.height

    Label:
        canvas:
            Color:
                rgba: 0, 1, 0, 1
            Rectangle:
                pos:root.width / 2 - 50, root.top * 1 / 8
                size:100, 2

    Label:
        canvas:
            Color:
                rgba: 0, 1, 0, 1
            Rectangle:
                pos:root.width / 2, root.top * 1 / 8 - 49
                size:2, 100

    Label:
        canvas:
            Color:
                rgba: 0, 1, 0, 1
            Line:
                width: 2
                rectangle: root.width / 2 - 50, root.top / 8 - 49, 100, 100

    Label:
        text: "roll: " + str(gyro.new_roll_value) + ", pitch: " + str(gyro.new_pitch_value)
        pos: root.width / 2, root.top / 7